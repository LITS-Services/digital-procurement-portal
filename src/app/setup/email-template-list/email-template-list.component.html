<section>
  <div class="row">
    <div class="col-12">

      <!-- Header -->
      <div class="row">
        <div class="col-md-12" style="margin-top: -0.25rem;">
          <h4 class="heading">Email Template List</h4>
        </div>
      </div>

      <!-- Action Pane -->
      <div class="card cstm-ui-card">
        <div class="row">
          <div class="col-md-6">
            <button class="btn btn-lg mr-1" type="button" (click)="homePage()">
              <i class="ft-arrow-left"></i>
            </button>
            <span class="vl"></span>

            <!-- Create Template Button -->
            <button type="button" class="btn btn-sm cstm-ui-table-btn" (click)="createTemplate()">
              <i class="ft-edit"></i>
              <label class="ml-1 mt-1">Create Email Template</label>
            </button>

            <!-- Delete Template Button -->
            <button type="button" class="btn btn-sm cstm-ui-table-btn" 
                    (click)="confirmDelete()" [disabled]="isDeleteButtonDisabled">
              <i class="ft-trash-2"></i>
              <label class="ml-1 mt-1">Delete</label>
            </button>

            <!-- Edit Template Button -->
            <button type="button" class="btn btn-sm cstm-ui-table-btn" 
                    (click)="editTemplate()" [disabled]="isEditButtonDisabled">
              <i class="ft-edit"></i>
              <label class="ml-1 mt-1">Edit</label>
            </button>

          </div>
        </div>
      </div>

      <!-- Datatable -->
      <ngx-datatable class="bootstrap core-bootstrap" [rows]="rows" [columnMode]="'force'" [headerHeight]="50"
                     [footerHeight]="50" [columns]="columns" rowHeight="auto" [limit]="15" [scrollbarH]="true"
                     [loadingIndicator]="loading" [selected]="chkBoxSelected" [swapColumns]="false"
                     [selectionType]="SelectionType.checkbox" (sort)="onSort($event)"
                     (select)="customChkboxOnSelect($event)">

        <!-- Checkbox Column -->
        <ngx-datatable-column [width]="50" [sortable]="false" [canAutoResize]="false" [draggable]="false"
                              [resizeable]="false">
          <ng-template ngx-datatable-header-template>
            <div class="custom-control cstm-checkbox-form">
              <input type="checkbox" [checked]="isAllSelected" (change)="toggleSelectAll($event)" />
            </div>
          </ng-template>
          <ng-template ngx-datatable-cell-template let-isSelected="isSelected"
                       let-onCheckboxChangeFn="onCheckboxChangeFn">
            <div class="custom-control custom-checkbox cstm-checkbox-form">
              <input type="checkbox" [checked]="isSelected" (change)="onCheckboxChangeFn($event)" />
            </div>
          </ng-template>
        </ngx-datatable-column>

        <!-- Sr No -->
        <ngx-datatable-column name="Sr. No." [width]="50" [resizeable]="false">
          <ng-template let-rowIndex="rowIndex" ngx-datatable-cell-template>
            <span>{{ rowIndex + 1 }}</span>
          </ng-template>
        </ngx-datatable-column>

        <!-- Dynamic Columns from TS -->
        <ngx-datatable-column *ngFor="let col of columns" [name]="col.name" [prop]="col.prop"
                              [width]="col.width || 100">
        </ngx-datatable-column>

      </ngx-datatable>

    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <ng-template #confirmDeleteModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title">Confirm Delete</h5>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to delete this template?</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">No</button>
      <button type="button" class="btn btn-danger" (click)="deleteTemplateConfirmed()">Yes</button>
    </div>
  </ng-template>

</section>
