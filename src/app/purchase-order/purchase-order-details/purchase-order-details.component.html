<section class="submit-bid-page" *ngIf="!loading; else loader">
    <div class="container-fluid">
        <!-- Tab Navigation -->
        <div class="po-tabs mb-3">
            <button (click)="selectTab('po-details')" [ngClass]="{ 'active': selectedTab === 'po-details' }"
                class="po-tab">
                PURCHASE ORDER
            </button>

            <button (click)="selectTab('shipment-details')" [ngClass]="{ 'active': selectedTab === 'shipment-details' }"
                class="po-tab">
                SHIPMENT DETAILS
            </button>

            <button (click)="selectTab('grn-details')" [ngClass]="{ 'active': selectedTab === 'grn-details' }"
                class="po-tab">
                GRN
            </button>

            <button (click)="selectTab('invoice-details')" [ngClass]="{ 'active': selectedTab === 'invoice-details' }"
                class="po-tab">
                INVOICING
            </button>
        </div>

        <div *ngIf="selectedTab === 'po-details'">
        <!-- Action Bar -->
        <!-- <div class="card cstm-ui-card mb-3 py-2 px-3 d-flex justify-content-between flex-wrap">
            <div class="d-flex align-items-center">
                <button class="btn btn-lg" type="button" (click)="homePage()">
                    <i class="ft-arrow-left"></i>
                </button>

                <h5 class="mt-2 fw-bold heading">Purchase Order Details</h5>
            </div>
        </div> -->

        <!-- PO Info Card -->
        <div class="card cstm-ui-card mb-4">
            <div class="card-body">

                <div class="row">

                    <div class="col-lg-4 col-md-6 mb-3">
                        <label>PO Number</label>
                        <input class="form-control custom-input" [value]="poDetails?.purchaseOrderNo" disabled>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-3">
                        <label>Requisition No</label>
                        <input class="form-control custom-input" [value]="poDetails?.requisitionNo || '-'" disabled>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-3">
                        <label>RFQ No</label>
                        <input class="form-control custom-input" [value]="poDetails?.rfqNo || '-'" disabled>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-3">
                        <label>Status</label>
                        <input class="form-control custom-input" [value]="poDetails?.requestStatus" disabled>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-3">
                        <label>Created Date</label>
                        <input class="form-control custom-input" [value]="poDetails?.createdDate | date:'yyyy-MM-dd'"
                            disabled>
                    </div>

                </div>
            </div>
        </div>
        <!-- Items Section -->
        <h5 class="heading mb-3 fw-bold" (click)="toggleItems()" style="cursor: pointer;">
            Items
            <i class="fa" [ngClass]="itemsExpanded ? 'fa-chevron-down' : 'fa-chevron-up'" style="font-size: 12px;"></i>
        </h5>

        <div [@expandCollapse]="itemsExpanded ? 'expanded' : 'collapsed'" style="overflow: hidden;">
            <div class="card cstm-ui-card border-0 shadow-sm">
                <div class="card-body p-0">

                    <div class="table-responsive">
                        <table class="table table-sm pro-table mb-0">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Description</th>
                                    <th class="text-end">Quantity</th>
                                    <th class="text-end">Unit Price</th>
                                    <th class="text-end">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of poDetails?.items">
                                    <td>{{ item.itemName }}</td>
                                    <td>{{ item.itemDescription }}</td>
                                    <td class="text-end">{{ item.quantity }}</td>
                                    <td class="text-end">{{ item.unitPrice | number:'1.2-2' }}</td>
                                    <td class="text-end fw-semibold">{{ item.amount | number:'1.2-2' }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>




        <div class="d-flex justify-content-end fw-bold mt-3">
            <h5>Total: {{ poDetails?.totalAmount | number:'1.2-2' }}</h5>
        </div>
    </div>
    <div *ngIf="selectedTab === 'shipment-details'">
        <app-shipment-details [poId]="poId"></app-shipment-details>
    </div>

    <div *ngIf="selectedTab === 'grn-details'">
        <app-grn-details></app-grn-details>
    </div>

    <div *ngIf="selectedTab === 'invoice-details'">
        <app-invoice></app-invoice>
    </div>
    </div>
</section>

<!-- Loader -->
<ng-template #loader>
    <div class="text-center mt-5">
        <div class="spinner-border"></div>
        <p>Loading Purchase Order details...</p>
    </div>
</ng-template>